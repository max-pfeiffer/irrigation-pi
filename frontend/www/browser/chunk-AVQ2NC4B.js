import{a as w}from"./chunk-SAQZAJ65.js";import{b as n,c as g,d as a,f as o,g as u,h as m,o as S,r as f}from"./chunk-3L42HEHQ.js";import{a as d,b as l}from"./chunk-JHI3MBHO.js";var y=(()=>{class s{capFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}transform(t){return this.capFirst(t.replace(/_/g," "))}static \u0275fac=function(e){return new(e||s)};static \u0275pipe=f({name:"displayString",type:s,pure:!0})}return s})();var p="/v1/schedule",U=(()=>{class s extends w{getSchedule(t){return this.getAppConfig().pipe(o(e=>{let r=new URL(`${e.api.host}${p}/${t}`);return this.httpClient.get(r.toString()).pipe(g(i=>this.stripSeconds(i)),a(i=>(this.showToast("There was an error retrieving the schedule!","danger"),n(()=>i))))}))}getSchedules(){return this.getAppConfig().pipe(o(t=>{let e=new URL(`${t.api.host}${p}/`);return this.httpClient.get(e.toString()).pipe(g(r=>r.map(i=>this.stripSeconds(i))),a(r=>(this.showToast("There was an error getting the list of schedules!","danger"),n(()=>r))))}))}createSchedule(t){return this.getAppConfig().pipe(o(e=>{let r=this.addSeconds(t),i=new URL(`${e.api.host}${p}/`);return this.httpClient.post(i.toString(),r).pipe(u(()=>{this.showToast("Schedule was created sucessfully!","success")}),a(h=>{let c=h.status===409?h.error.detail:"There was an error creating the schedule!";return this.showToast(c,"danger"),n(()=>h)}))}))}updateSchedule(t,e){return this.getAppConfig().pipe(o(r=>{let i=this.addSeconds(e),h=new URL(`${r.api.host}${p}/${t}`);return this.httpClient.put(h.toString(),i).pipe(u(()=>{this.showToast("Schedule was updated sucessfully!","success")}),a(c=>{let $=c.status===409?c.error.detail:"There was an error updating the schedule!";return this.showToast($,"danger"),n(()=>c)}))}))}deleteSchedule(t){return this.getAppConfig().pipe(o(e=>{let r=new URL(`${e.api.host}${p}/${t}`);return this.httpClient.delete(r.toString()).pipe(u(()=>{this.showToast("Schedule was deleted sucessfully!","success")}),a(i=>(this.showToast("There was an error deleting the schedule!","danger"),n(()=>i))))}))}stripSeconds(t){let e=t.start_time.match(/^([0-9]{1,2}):([0-9]{1,2})/);return l(d({},t),{start_time:e?`${e[1]}:${e[2]}`:t.start_time})}addSeconds(t){let e=t.start_time.match(/^([0-9]{1,2}):([0-9]{1,2})/);return l(d({},t),{start_time:e?`${e[1]}:${e[2]}:00`:t.start_time})}static \u0275fac=(()=>{let t;return function(r){return(t||(t=S(s)))(r||s)}})();static \u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();export{y as a,U as b};
