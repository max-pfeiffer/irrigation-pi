import{a as ce,b as y}from"./chunk-AVQ2NC4B.js";import"./chunk-SAQZAJ65.js";import{a as le,h as se}from"./chunk-FMYNHP3B.js";import{a as g}from"./chunk-TO2MX4KO.js";import{A as b,Aa as ie,B as p,C as M,D as V,E as P,Ea as ne,F as N,Fa as oe,G as a,H as w,Ha as re,I as f,J as R,K as B,Ka as _,L as Q,M as O,N as j,O as z,P as $,T as v,V as q,e as m,fa as H,ha as S,j as s,k as C,l as L,ma as Y,n as x,na as G,oa as J,p as o,pa as K,q as h,qa as U,ta as W,u as A,ua as X,v as F,va as Z,w as c,wa as ee,x as r,xa as te,y as l,z as u}from"./chunk-3L42HEHQ.js";import"./chunk-CLAHLS7V.js";import"./chunk-7OOC4MCY.js";import"./chunk-4G6E6OF5.js";import"./chunk-HY2EOBI2.js";import"./chunk-SZW6GDO7.js";import"./chunk-6OREKIDA.js";import"./chunk-4WFVMWDK.js";import"./chunk-K7C27B2F.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-DF3GZESY.js";import"./chunk-PVMEIX5M.js";import"./chunk-42C7ZIID.js";import{a as T,b as D,d as k,e as E}from"./chunk-JHI3MBHO.js";var ue=i=>["/schedules/edit/",i],ae=(()=>{class i{scheduleService=s(y);cdr=s($);alertController=s(re);navController=s(S);route=s(v);schedule=z();refreshList=j();constructor(){g({trash:se})}toggleActive(){let e=this.schedule(),{id:n}=e,t=k(e,["id"]);t=D(T({},t),{active:!this.schedule().active}),this.scheduleService.updateSchedule(n,t).pipe(m(()=>{this.refreshList.emit()})).subscribe()}deleteSchedule(){return E(this,null,function*(){yield(yield this.alertController.create({header:"Are you sure?",message:"Do you really want to delete this schedule?",buttons:[{text:"Yes",role:"destructive",handler:()=>{this.scheduleService.deleteSchedule(this.schedule().id).pipe(m(()=>{this.refreshList.emit()})).subscribe()}},{text:"No",role:"cancel"}]})).present()})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-schedule-tile"]],inputs:{schedule:[1,"schedule"]},outputs:{refreshList:"refreshList"},decls:18,vars:13,consts:[[3,"routerLink"],["slot","end","color","primary",3,"disabled"],["side","start"],[3,"click","color"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(t,e){t&1&&(r(0,"ion-item-sliding")(1,"ion-item",0)(2,"ion-label")(3,"h2"),a(4),Q(5,"displayString"),l(),r(6,"p"),a(7),u(8,"br"),a(9),l()(),r(10,"ion-chip",1),a(11),l()(),r(12,"ion-item-options",2)(13,"ion-item-option",3),p("click",function(){return e.toggleActive()}),a(14),l()(),r(15,"ion-item-options",4)(16,"ion-item-option",5),p("click",function(){return e.deleteSchedule()}),u(17,"ion-icon",6),l()()()),t&2&&(o(),c("routerLink",B(11,ue,e.schedule().id)),o(3),w(O(5,9,e.schedule().repeat)),o(3),f(" At ",e.schedule().start_time," o'clock"),o(2),f(" For ",e.schedule().duration," minutes "),o(),c("disabled",!e.schedule().active),o(),w(e.schedule().active?"Active":"Inactive"),o(2),c("color",R(e.schedule().active?"danger":"success")),o(),f(" ",e.schedule().active?"Deactivate":"Activate"," "))},dependencies:[H,q,Z,ee,J,X,W,_,ce],encapsulation:2,changeDetection:0})}return i})();var pe=["scheduleList"],me=(i,I)=>I.id;function he(i,I){if(i&1){let n=b();r(0,"app-schedule-tile",8),p("refreshList",function(){C(n);let e=M();return L(e.refreshList())}),l()}if(i&2){let n=I.$implicit;c("schedule",n)}}var Oe=(()=>{class i{schedulerService=s(y);navController=s(S);route=s(v);scheduleList;schedules=x([]);constructor(){g({addOutline:le})}ionViewDidEnter(){this.refreshList()}refreshList(){this.schedulerService.getSchedules().pipe(m(()=>this.scheduleList.closeSlidingItems().catch(()=>{}))).subscribe({next:n=>{this.schedules.set(n)}})}addSchedule(){this.navController.navigateForward(["edit"],{relativeTo:this.route})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-schedule-list"]],viewQuery:function(t,e){if(t&1&&V(pe,5),t&2){let d;P(d=N())&&(e.scheduleList=d.first)}},decls:14,vars:2,consts:[["scheduleList",""],[3,"translucent"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","add-outline"],[3,"fullscreen"],[3,"schedule"],[3,"refreshList","schedule"]],template:function(t,e){if(t&1){let d=b();r(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),u(3,"ion-menu-button"),l(),r(4,"ion-title"),a(5,"Schedules"),l(),r(6,"ion-buttons",3)(7,"ion-button",4),p("click",function(){return C(d),L(e.addSchedule())}),u(8,"ion-icon",5),l()()()(),r(9,"ion-content",6)(10,"ion-list",null,0),A(12,he,1,1,"app-schedule-tile",7,me),l()()}t&2&&(c("translucent",!0),o(9),c("fullscreen",!0),o(3),F(e.schedules()))},dependencies:[ae,U,oe,G,ie,ne,Y,_,K,te],encapsulation:2,changeDetection:0})}return i})();export{Oe as ScheduleListPage};
